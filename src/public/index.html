<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>canvas.run</title>
<link rel="stylesheet/less" type="text/css" href="editor.less">
<script src="vendor/less/dist/less.min.js"></script>
<script src="vendor/lodash/lodash.min.js"></script>
<script src="vendor/ace-builds/src-min-noconflict/ace.js"></script>
<script src="vendor/ace-builds/src-min-noconflict/mode-javascript.js"></script>
</head>
<body>
<div id="header">
  <button id="save">Save</button>
  <button id="reset-state">Reset State</button>
</div>
<div id="editor"></div>
<div id="splitter"></div>
<div id="output">
  <canvas id="canvas"></canvas>
  <pre id="error"></pre>
</div>
<script type="text/default" id="default">// Here, you're writing the contents of a function with the following signature:
// function render(canvas, state, t)

// Get the context you want from the "canvas" argument
var ctx = canvas.getContext('2d');

// The "t" argument gives you the milliseconds since the animation started
ctx.fillStyle = 'hsl(200, ' + Math.floor((Math.sin(t / 500) + 1) * 50) + '%, 50%)';
ctx.globalAlpha = 0.3;
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.globalAlpha = 1;

// You can store state in "state"
if (isNaN(state.x)) {
  state.x = canvas.width / 2;
  state.y = canvas.height / 5;
  state.vx = 2;
  state.vy = 0;
}

var radius = 10;

ctx.fillStyle = '#fff';
ctx.beginPath();
ctx.arc(state.x, state.y, radius, 0, 2 * Math.PI, false);
ctx.fill();

state.x += state.vx;
state.y += state.vy;

if (state.x < radius || state.x >= canvas.width - radius) {
  state.vx = -state.vx;
  state.x += state.vx;
}

if (state.y < radius || state.y >= canvas.height - radius) {
  state.vy = -state.vy;
  state.y += state.vy;
}

state.vy += 0.2;</script>
<script src="editor.js"></script>
</body>
</html>
